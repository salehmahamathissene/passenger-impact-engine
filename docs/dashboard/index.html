<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PIE Dashboard</title>
<style>
  :root {
    --bg: #0b0f17;
    --card: #121a27;
    --text: #e8eefc;
    --muted: #a9b4cc;
    --line: rgba(255,255,255,.08);
    --accent: #6aa6ff;
  }
  body {
    margin: 0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    background: var(--bg);
    color: var(--text);
  }
  .wrap {
    max-width: 1100px;
    margin: 0 auto;
    padding: 28px 18px 60px;
  }
  h1 {
    font-size: 28px;
    margin: 0 0 6px;
  }
  .sub {
    color: var(--muted);
    margin-bottom: 22px;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 14px;
  }
  .card {
    background: var(--card);
    border: 1px solid var(--line);
    border-radius: 14px;
    padding: 14px;
  }
  .span-12 { grid-column: span 12; }
  .span-6 { grid-column: span 6; }
  .span-4 { grid-column: span 4; }
  .span-8 { grid-column: span 8; }
  .kpi {
    font-size: 13px;
    color: var(--muted);
  }
  .kpi strong {
    display: block;
    font-size: 22px;
    color: var(--text);
    margin-top: 4px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }
  th, td {
    text-align: left;
    padding: 10px 8px;
    border-bottom: 1px solid var(--line);
    vertical-align: top;
  }
  th {
    color: var(--muted);
    font-weight: 600;
  }
  .pill {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 999px;
    background: rgba(106,166,255,.12);
    color: var(--accent);
    border: 1px solid rgba(106,166,255,.25);
    font-size: 12px;
  }
  img {
    max-width: 100%;
    border-radius: 10px;
    border: 1px solid var(--line);
  }
  .muted {
    color: var(--muted);
  }
  .footer {
    margin-top: 18px;
    color: var(--muted);
    font-size: 12px;
  }
  @media (max-width: 900px) {
    .span-6, .span-4, .span-8 { grid-column: span 12; }
  }
</style>
</head>
<body>
<div class="wrap">

<h1>Passenger Impact Engine — Dashboard</h1>
<div class="sub">
  Run: <span class="pill">14ff907ec92a0b76</span>
  &nbsp;&nbsp; Grouping: <span class="pill">segment,dtype</span>
  &nbsp;&nbsp; Metric: <span class="pill">p95</span>
</div>

<div class="grid">
  <div class="card span-4"><div class="kpi">Mean total cost (EUR)<strong>—</strong></div></div>
  <div class="card span-4"><div class="kpi">P95 total cost (EUR)<strong>—</strong></div></div>
  <div class="card span-4"><div class="kpi">CVaR95 total cost (EUR)<strong>—</strong></div></div>

  <div class="card span-12">
    <h3 style="margin:0 0 10px;">Charts</h3>
    <div class="grid">
      <div class="span-6"><img src='assets/mean_by_group.png' alt='Mean cost by group'/></div>
      <div class="span-6"><img src='assets/p95_by_group.png' alt='P95 cost by group'/></div>
      <div class="span-12"><img src='assets/top_passengers.png' alt='Top passengers by score'/></div>
      <div class="span-12"><img src='assets/components.png' alt='Cost components (sum)'/></div>
    </div>
  </div>

  <div class="card span-12">
    <h3 style="margin:0 0 10px;">Group statistics</h3>
    <div class="muted" style="margin-bottom:10px;">Source: stats_groups.csv</div>
    <table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>group</th>
      <th>rows</th>
      <th>mean_total_cost_eur</th>
      <th>sum_total_cost_eur</th>
      <th>min_total_cost_eur</th>
      <th>max_total_cost_eur</th>
      <th>p50_total_cost_eur</th>
      <th>p95_total_cost_eur</th>
      <th>p99_total_cost_eur</th>
      <th>sum_cash_comp_eur</th>
      <th>sum_care_cost_eur</th>
      <th>sum_refund_cost_eur</th>
      <th>sum_rebooking_cost_eur</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>segment=leisure|dtype=delay</td>
      <td>443764.0</td>
      <td>581.984276</td>
      <td>2.582637e+08</td>
      <td>200.00</td>
      <td>1334.31</td>
      <td>600.415</td>
      <td>901.2205</td>
      <td>1018.4236</td>
      <td>132121600.0</td>
      <td>20992130.0</td>
      <td>4.911618e+07</td>
      <td>5.603383e+07</td>
    </tr>
    <tr>
      <td>segment=business|dtype=delay</td>
      <td>288143.0</td>
      <td>1058.541840</td>
      <td>3.050114e+08</td>
      <td>200.06</td>
      <td>1975.42</td>
      <td>1104.095</td>
      <td>1562.8470</td>
      <td>1714.1305</td>
      <td>67558400.0</td>
      <td>11652475.0</td>
      <td>1.914748e+08</td>
      <td>3.432572e+07</td>
    </tr>
    <tr>
      <td>segment=leisure|dtype=cancel</td>
      <td>229863.0</td>
      <td>746.464066</td>
      <td>1.715845e+08</td>
      <td>541.23</td>
      <td>1341.71</td>
      <td>716.765</td>
      <td>1056.5405</td>
      <td>1136.3107</td>
      <td>91945200.0</td>
      <td>29882190.0</td>
      <td>2.229306e+07</td>
      <td>2.746403e+07</td>
    </tr>
    <tr>
      <td>segment=business|dtype=cancel</td>
      <td>117537.0</td>
      <td>1313.323005</td>
      <td>1.543640e+08</td>
      <td>592.23</td>
      <td>1982.82</td>
      <td>1313.390</td>
      <td>1673.9140</td>
      <td>1801.1951</td>
      <td>47014800.0</td>
      <td>15279810.0</td>
      <td>7.802612e+07</td>
      <td>1.404332e+07</td>
    </tr>
  </tbody>
</table>
  </div>

  <div class="card span-12">
    <h3 style="margin:0 0 10px;">Top passengers</h3>
    <div class="muted" style="margin-bottom:10px;">Source: stats_top_passengers.csv</div>
    <table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>passenger_id</th>
      <th>rows</th>
      <th>mean_total_cost_eur</th>
      <th>sum_total_cost_eur</th>
      <th>max_total_cost_eur</th>
      <th>p50_total_cost_eur</th>
      <th>p95_total_cost_eur</th>
      <th>p99_total_cost_eur</th>
      <th>score</th>
      <th>metric</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>P00574</td>
      <td>2000.0</td>
      <td>1661.63</td>
      <td>3323260.0</td>
      <td>1982.82</td>
      <td>1759.295</td>
      <td>1902.9580</td>
      <td>1922.7590</td>
      <td>1902.9580</td>
      <td>p95</td>
    </tr>
    <tr>
      <td>P00453</td>
      <td>2000.0</td>
      <td>1633.62</td>
      <td>3267240.0</td>
      <td>1954.81</td>
      <td>1732.770</td>
      <td>1864.4730</td>
      <td>1905.8888</td>
      <td>1864.4730</td>
      <td>p95</td>
    </tr>
    <tr>
      <td>P00336</td>
      <td>2000.0</td>
      <td>1626.38</td>
      <td>3252760.0</td>
      <td>1947.57</td>
      <td>1743.065</td>
      <td>1854.7705</td>
      <td>1884.7757</td>
      <td>1854.7705</td>
      <td>p95</td>
    </tr>
    <tr>
      <td>P00495</td>
      <td>2000.0</td>
      <td>1619.44</td>
      <td>3238880.0</td>
      <td>1940.63</td>
      <td>1720.820</td>
      <td>1852.7170</td>
      <td>1875.2390</td>
      <td>1852.7170</td>
      <td>p95</td>
    </tr>
    <tr>
      <td>P00274</td>
      <td>2000.0</td>
      <td>1585.21</td>
      <td>3170420.0</td>
      <td>1906.40</td>
      <td>1682.110</td>
      <td>1820.1760</td>
      <td>1850.2831</td>
      <td>1820.1760</td>
      <td>p95</td>
    </tr>
  </tbody>
</table>
  </div>
</div>

<div class="footer">Generated by Passenger Impact Engine — dashboard</div>
</div>
</body>
</html>
